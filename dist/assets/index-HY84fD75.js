(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Ie,R,Wt,G,dt,qt,zt,Jt,nt,Ve,Ke,le={},Vt=[],Dn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ae=Array.isArray;function V(t,e){for(var n in e)t[n]=e[n];return t}function ot(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function On(t,e,n){var o,r,s,i={};for(s in e)s=="key"?o=e[s]:s=="ref"?r=e[s]:i[s]=e[s];if(arguments.length>2&&(i.children=arguments.length>3?Ie.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)i[s]===void 0&&(i[s]=t.defaultProps[s]);return we(t,i,o,r,null)}function we(t,e,n,o,r){var s={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++Wt,__i:-1,__u:0};return r==null&&R.vnode!=null&&R.vnode(s),s}function _e(t){return t.children}function ye(t,e){this.props=t,this.context=e}function oe(t,e){if(e==null)return t.__?oe(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?oe(t):null}function Kt(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Kt(t)}}function _t(t){(!t.__d&&(t.__d=!0)&&G.push(t)&&!ke.__r++||dt!=R.debounceRendering)&&((dt=R.debounceRendering)||qt)(ke)}function ke(){for(var t,e,n,o,r,s,i,a=1;G.length;)G.length>a&&G.sort(zt),t=G.shift(),a=G.length,t.__d&&(n=void 0,r=(o=(e=t).__v).__e,s=[],i=[],e.__P&&((n=V({},o)).__v=o.__v+1,R.vnode&&R.vnode(n),rt(e.__P,n,o,e.__n,e.__P.namespaceURI,32&o.__u?[r]:null,s,r??oe(o),!!(32&o.__u),i),n.__v=o.__v,n.__.__k[n.__i]=n,Qt(s,n,i),n.__e!=r&&Kt(n)));ke.__r=0}function Xt(t,e,n,o,r,s,i,a,c,l,h){var u,g,m,_,w,p,y=o&&o.__k||Vt,b=e.length;for(c=$n(n,e,y,c,b),u=0;u<b;u++)(m=n.__k[u])!=null&&(g=m.__i==-1?le:y[m.__i]||le,m.__i=u,p=rt(t,m,g,r,s,i,a,c,l,h),_=m.__e,m.ref&&g.ref!=m.ref&&(g.ref&&st(g.ref,null,m),h.push(m.ref,m.__c||_,m)),w==null&&_!=null&&(w=_),4&m.__u||g.__k===m.__k?c=Gt(m,c,t):typeof m.type=="function"&&p!==void 0?c=p:_&&(c=_.nextSibling),m.__u&=-7);return n.__e=w,c}function $n(t,e,n,o,r){var s,i,a,c,l,h=n.length,u=h,g=0;for(t.__k=new Array(r),s=0;s<r;s++)(i=e[s])!=null&&typeof i!="boolean"&&typeof i!="function"?(c=s+g,(i=t.__k[s]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?we(null,i,null,null,null):Ae(i)?we(_e,{children:i},null,null,null):i.constructor==null&&i.__b>0?we(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=t,i.__b=t.__b+1,a=null,(l=i.__i=Nn(i,n,c,u))!=-1&&(u--,(a=n[l])&&(a.__u|=2)),a==null||a.__v==null?(l==-1&&(r>h?g--:r<h&&g++),typeof i.type!="function"&&(i.__u|=4)):l!=c&&(l==c-1?g--:l==c+1?g++:(l>c?g--:g++,i.__u|=4))):t.__k[s]=null;if(u)for(s=0;s<h;s++)(a=n[s])!=null&&(2&a.__u)==0&&(a.__e==o&&(o=oe(a)),Yt(a,a));return o}function Gt(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=Gt(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=oe(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Nn(t,e,n,o){var r,s,i=t.key,a=t.type,c=e[n];if(c===null&&t.key==null||c&&i==c.key&&a==c.type&&(2&c.__u)==0)return n;if(o>(c!=null&&(2&c.__u)==0?1:0))for(r=n-1,s=n+1;r>=0||s<e.length;){if(r>=0){if((c=e[r])&&(2&c.__u)==0&&i==c.key&&a==c.type)return r;r--}if(s<e.length){if((c=e[s])&&(2&c.__u)==0&&i==c.key&&a==c.type)return s;s++}}return-1}function pt(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Dn.test(e)?n:n+"px"}function me(t,e,n,o,r){var s,i;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||pt(t.style,e,"");if(n)for(e in n)o&&n[e]==o[e]||pt(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(Jt,"$1")),i=e.toLowerCase(),e=i in t||e=="onFocusOut"||e=="onFocusIn"?i.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?o?n.u=o.u:(n.u=nt,t.addEventListener(e,s?Ke:Ve,s)):t.removeEventListener(e,s?Ke:Ve,s);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function gt(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=nt++;else if(e.t<n.u)return;return n(R.event?R.event(e):e)}}}function rt(t,e,n,o,r,s,i,a,c,l){var h,u,g,m,_,w,p,y,b,v,k,T,N,W,J,K,He,q=e.type;if(e.constructor!=null)return null;128&n.__u&&(c=!!(32&n.__u),s=[a=e.__e=n.__e]),(h=R.__b)&&h(e);e:if(typeof q=="function")try{if(y=e.props,b="prototype"in q&&q.prototype.render,v=(h=q.contextType)&&o[h.__c],k=h?v?v.props.value:h.__:o,n.__c?p=(u=e.__c=n.__c).__=u.__E:(b?e.__c=u=new q(y,k):(e.__c=u=new ye(y,k),u.constructor=q,u.render=Fn),v&&v.sub(u),u.props=y,u.state||(u.state={}),u.context=k,u.__n=o,g=u.__d=!0,u.__h=[],u._sb=[]),b&&u.__s==null&&(u.__s=u.state),b&&q.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=V({},u.__s)),V(u.__s,q.getDerivedStateFromProps(y,u.__s))),m=u.props,_=u.state,u.__v=e,g)b&&q.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),b&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(b&&q.getDerivedStateFromProps==null&&y!==m&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(y,k),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(y,u.__s,k)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(u.props=y,u.state=u.__s,u.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(ae){ae&&(ae.__=e)}),T=0;T<u._sb.length;T++)u.__h.push(u._sb[T]);u._sb=[],u.__h.length&&i.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(y,u.__s,k),b&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(m,_,w)})}if(u.context=k,u.props=y,u.__P=t,u.__e=!1,N=R.__r,W=0,b){for(u.state=u.__s,u.__d=!1,N&&N(e),h=u.render(u.props,u.state,u.context),J=0;J<u._sb.length;J++)u.__h.push(u._sb[J]);u._sb=[]}else do u.__d=!1,N&&N(e),h=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++W<25);u.state=u.__s,u.getChildContext!=null&&(o=V(V({},o),u.getChildContext())),b&&!g&&u.getSnapshotBeforeUpdate!=null&&(w=u.getSnapshotBeforeUpdate(m,_)),K=h,h!=null&&h.type===_e&&h.key==null&&(K=Zt(h.props.children)),a=Xt(t,Ae(K)?K:[K],e,n,o,r,s,i,a,c,l),u.base=e.__e,e.__u&=-161,u.__h.length&&i.push(u),p&&(u.__E=u.__=null)}catch(ae){if(e.__v=null,c||s!=null)if(ae.then){for(e.__u|=c?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,e.__e=a}else for(He=s.length;He--;)ot(s[He]);else e.__e=n.__e,e.__k=n.__k;R.__e(ae,e,n)}else s==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):a=e.__e=Un(n.__e,e,n,o,r,s,i,c,l);return(h=R.diffed)&&h(e),128&e.__u?void 0:a}function Qt(t,e,n){for(var o=0;o<n.length;o++)st(n[o],n[++o],n[++o]);R.__c&&R.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(s){s.call(r)})}catch(s){R.__e(s,r.__v)}})}function Zt(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:Ae(t)?t.map(Zt):V({},t)}function Un(t,e,n,o,r,s,i,a,c){var l,h,u,g,m,_,w,p=n.props,y=e.props,b=e.type;if(b=="svg"?r="http://www.w3.org/2000/svg":b=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(l=0;l<s.length;l++)if((m=s[l])&&"setAttribute"in m==!!b&&(b?m.localName==b:m.nodeType==3)){t=m,s[l]=null;break}}if(t==null){if(b==null)return document.createTextNode(y);t=document.createElementNS(r,b,y.is&&y),a&&(R.__m&&R.__m(e,s),a=!1),s=null}if(b==null)p===y||a&&t.data==y||(t.data=y);else{if(s=s&&Ie.call(t.childNodes),p=n.props||le,!a&&s!=null)for(p={},l=0;l<t.attributes.length;l++)p[(m=t.attributes[l]).name]=m.value;for(l in p)if(m=p[l],l!="children"){if(l=="dangerouslySetInnerHTML")u=m;else if(!(l in y)){if(l=="value"&&"defaultValue"in y||l=="checked"&&"defaultChecked"in y)continue;me(t,l,null,m,r)}}for(l in y)m=y[l],l=="children"?g=m:l=="dangerouslySetInnerHTML"?h=m:l=="value"?_=m:l=="checked"?w=m:a&&typeof m!="function"||p[l]===m||me(t,l,m,p[l],r);if(h)a||u&&(h.__html==u.__html||h.__html==t.innerHTML)||(t.innerHTML=h.__html),e.__k=[];else if(u&&(t.innerHTML=""),Xt(e.type=="template"?t.content:t,Ae(g)?g:[g],e,n,o,b=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,i,s?s[0]:n.__k&&oe(n,0),a,c),s!=null)for(l=s.length;l--;)ot(s[l]);a||(l="value",b=="progress"&&_==null?t.removeAttribute("value"):_!=null&&(_!==t[l]||b=="progress"&&!_||b=="option"&&_!=p[l])&&me(t,l,_,p[l],r),l="checked",w!=null&&w!=t[l]&&me(t,l,w,p[l],r))}return t}function st(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){R.__e(r,n)}}function Yt(t,e,n){var o,r;if(R.unmount&&R.unmount(t),(o=t.ref)&&(o.current&&o.current!=t.__e||st(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(s){R.__e(s,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&Yt(o[r],e,n||typeof t.type!="function");n||ot(t.__e),t.__c=t.__=t.__e=void 0}function Fn(t,e,n){return this.constructor(t,n)}function Ln(t,e,n){var o,r,s,i;e==document&&(e=document.documentElement),R.__&&R.__(t,e),r=(o=!1)?null:e.__k,s=[],i=[],rt(e,t=e.__k=On(_e,null,[t]),r||le,le,e.namespaceURI,r?null:e.firstChild?Ie.call(e.childNodes):null,s,r?r.__e:e.firstChild,o,i),Qt(s,t,i)}Ie=Vt.slice,R={__e:function(t,e,n,o){for(var r,s,i;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(t)),i=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),i=r.__d),i)return r.__E=r}catch(a){t=a}throw t}},Wt=0,ye.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=V({},this.state),typeof t=="function"&&(t=t(V({},n),this.props)),t&&V(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),_t(this))},ye.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),_t(this))},ye.prototype.render=_e,G=[],qt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,zt=function(t,e){return t.__v.__b-e.__v.__b},ke.__r=0,Jt=/(PointerCapture)$|Capture$/i,nt=0,Ve=gt(!1),Ke=gt(!0);var Bn=0;function E(t,e,n,o,r,s){e||(e={});var i,a,c=e;if("ref"in c)for(a in c={},e)a=="ref"?i=e[a]:c[a]=e[a];var l={type:t,props:c,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Bn,__i:-1,__u:0,__source:r,__self:s};if(typeof t=="function"&&(i=t.defaultProps))for(a in i)c[a]===void 0&&(c[a]=i[a]);return R.vnode&&R.vnode(l),l}var ue,A,Me,mt,Te=0,en=[],D=R,bt=D.__b,wt=D.__r,yt=D.diffed,St=D.__c,Ct=D.unmount,Et=D.__;function it(t,e){D.__h&&D.__h(A,t,Te||e),Te=0;var n=A.__H||(A.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function X(t){return Te=1,Hn(nn,t)}function Hn(t,e,n){var o=it(ue++,2);if(o.t=t,!o.__c&&(o.__=[nn(void 0,e),function(a){var c=o.__N?o.__N[0]:o.__[0],l=o.t(c,a);c!==l&&(o.__N=[l,o.__[1]],o.__c.setState({}))}],o.__c=A,!A.__f)){var r=function(a,c,l){if(!o.__c.__H)return!0;var h=o.__c.__H.__.filter(function(g){return!!g.__c});if(h.every(function(g){return!g.__N}))return!s||s.call(this,a,c,l);var u=o.__c.props!==a;return h.forEach(function(g){if(g.__N){var m=g.__[0];g.__=g.__N,g.__N=void 0,m!==g.__[0]&&(u=!0)}}),s&&s.call(this,a,c,l)||u};A.__f=!0;var s=A.shouldComponentUpdate,i=A.componentWillUpdate;A.componentWillUpdate=function(a,c,l){if(this.__e){var h=s;s=void 0,r(a,c,l),s=h}i&&i.call(this,a,c,l)},A.shouldComponentUpdate=r}return o.__N||o.__}function je(t,e){var n=it(ue++,3);!D.__s&&tn(n.__H,e)&&(n.__=t,n.u=e,A.__H.__h.push(n))}function Mn(t){return Te=5,jn(function(){return{current:t}},[])}function jn(t,e){var n=it(ue++,7);return tn(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Wn(){for(var t;t=en.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Se),t.__H.__h.forEach(Xe),t.__H.__h=[]}catch(e){t.__H.__h=[],D.__e(e,t.__v)}}D.__b=function(t){A=null,bt&&bt(t)},D.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Et&&Et(t,e)},D.__r=function(t){wt&&wt(t),ue=0;var e=(A=t.__c).__H;e&&(Me===A?(e.__h=[],A.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(Se),e.__h.forEach(Xe),e.__h=[],ue=0)),Me=A},D.diffed=function(t){yt&&yt(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(en.push(e)!==1&&mt===D.requestAnimationFrame||((mt=D.requestAnimationFrame)||qn)(Wn)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Me=A=null},D.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Se),n.__h=n.__h.filter(function(o){return!o.__||Xe(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],D.__e(o,n.__v)}}),St&&St(t,e)},D.unmount=function(t){Ct&&Ct(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{Se(o)}catch(r){e=r}}),n.__H=void 0,e&&D.__e(e,n.__v))};var vt=typeof requestAnimationFrame=="function";function qn(t){var e,n=function(){clearTimeout(o),vt&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,35);vt&&(e=requestAnimationFrame(n))}function Se(t){var e=A,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),A=e}function Xe(t){var e=A;t.__c=t.__(),A=e}function tn(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function nn(t,e){return typeof e=="function"?e(t):e}const zn=({onOpen:t})=>E("button",{onClick:t,"aria-label":"Open chat",class:"fixed bottom-4 right-4 sm:bottom-8 sm:right-8 z-50 rounded-full shadow-lg p-4 transition-transform hover:scale-110 ",children:E("img",{src:"logo.png",alt:"",className:"w-full h-full"})});class Z extends Error{constructor(e,n){const o=new.target.prototype;super(`${e}: Status code '${n}'`),this.statusCode=n,this.__proto__=o}}class at extends Error{constructor(e="A timeout occurred."){const n=new.target.prototype;super(e),this.__proto__=n}}class M extends Error{constructor(e="An abort occurred."){const n=new.target.prototype;super(e),this.__proto__=n}}class Jn extends Error{constructor(e,n){const o=new.target.prototype;super(e),this.transport=n,this.errorType="UnsupportedTransportError",this.__proto__=o}}class Vn extends Error{constructor(e,n){const o=new.target.prototype;super(e),this.transport=n,this.errorType="DisabledTransportError",this.__proto__=o}}class Kn extends Error{constructor(e,n){const o=new.target.prototype;super(e),this.transport=n,this.errorType="FailedToStartTransportError",this.__proto__=o}}class kt extends Error{constructor(e){const n=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=n}}class Xn extends Error{constructor(e,n){const o=new.target.prototype;super(e),this.innerErrors=n,this.__proto__=o}}class on{constructor(e,n,o){this.statusCode=e,this.statusText=n,this.content=o}}class De{get(e,n){return this.send({...n,method:"GET",url:e})}post(e,n){return this.send({...n,method:"POST",url:e})}delete(e,n){return this.send({...n,method:"DELETE",url:e})}getCookieString(e){return""}}var d;(function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"})(d||(d={}));class he{constructor(){}log(e,n){}}he.instance=new he;const Gn="8.0.7";class O{static isRequired(e,n){if(e==null)throw new Error(`The '${n}' argument is required.`)}static isNotEmpty(e,n){if(!e||e.match(/^\s*$/))throw new Error(`The '${n}' argument should not be empty.`)}static isIn(e,n,o){if(!(e in n))throw new Error(`Unknown ${o} value: ${e}.`)}}class x{static get isBrowser(){return!x.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!x.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!x.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function fe(t,e){let n="";return te(t)?(n=`Binary data of length ${t.byteLength}`,e&&(n+=`. Content: '${Qn(t)}'`)):typeof t=="string"&&(n=`String data of length ${t.length}`,e&&(n+=`. Content: '${t}'`)),n}function Qn(t){const e=new Uint8Array(t);let n="";return e.forEach(o=>{const r=o<16?"0":"";n+=`0x${r}${o.toString(16)} `}),n.substr(0,n.length-1)}function te(t){return t&&typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||t.constructor&&t.constructor.name==="ArrayBuffer")}async function rn(t,e,n,o,r,s){const i={},[a,c]=re();i[a]=c,t.log(d.Trace,`(${e} transport) sending data. ${fe(r,s.logMessageContent)}.`);const l=te(r)?"arraybuffer":"text",h=await n.post(o,{content:r,headers:{...i,...s.headers},responseType:l,timeout:s.timeout,withCredentials:s.withCredentials});t.log(d.Trace,`(${e} transport) request complete. Response status: ${h.statusCode}.`)}function Zn(t){return t===void 0?new Re(d.Information):t===null?he.instance:t.log!==void 0?t:new Re(t)}class Yn{constructor(e,n){this._subject=e,this._observer=n}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(n=>{})}}class Re{constructor(e){this._minLevel=e,this.out=console}log(e,n){if(e>=this._minLevel){const o=`[${new Date().toISOString()}] ${d[e]}: ${n}`;switch(e){case d.Critical:case d.Error:this.out.error(o);break;case d.Warning:this.out.warn(o);break;case d.Information:this.out.info(o);break;default:this.out.log(o);break}}}}function re(){let t="X-SignalR-User-Agent";return x.isNode&&(t="User-Agent"),[t,eo(Gn,to(),oo(),no())]}function eo(t,e,n,o){let r="Microsoft SignalR/";const s=t.split(".");return r+=`${s[0]}.${s[1]}`,r+=` (${t}; `,e&&e!==""?r+=`${e}; `:r+="Unknown OS; ",r+=`${n}`,o?r+=`; ${o}`:r+="; Unknown Runtime Version",r+=")",r}function to(){if(x.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function no(){if(x.isNode)return process.versions.node}function oo(){return x.isNode?"NodeJS":"Browser"}function We(t){return t.stack?t.stack:t.message?t.message:`${t}`}function ro(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class so extends De{constructor(e){if(super(),this._logger=e,typeof fetch>"u"||x.isNode){const n=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(n("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=n("node-fetch"):this._fetchType=fetch,this._fetchType=n("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(ro());if(typeof AbortController>"u"){const n=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=n("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new M;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const n=new this._abortControllerType;let o;e.abortSignal&&(e.abortSignal.onabort=()=>{n.abort(),o=new M});let r=null;if(e.timeout){const c=e.timeout;r=setTimeout(()=>{n.abort(),this._logger.log(d.Warning,"Timeout from HTTP request."),o=new at},c)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},te(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let s;try{s=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:n.signal})}catch(c){throw o||(this._logger.log(d.Warning,`Error from HTTP request. ${c}.`),c)}finally{r&&clearTimeout(r),e.abortSignal&&(e.abortSignal.onabort=null)}if(!s.ok){const c=await Tt(s,"text");throw new Z(c||s.statusText,s.status)}const a=await Tt(s,e.responseType);return new on(s.status,s.statusText,a)}getCookieString(e){let n="";return x.isNode&&this._jar&&this._jar.getCookies(e,(o,r)=>n=r.join("; ")),n}}function Tt(t,e){let n;switch(e){case"arraybuffer":n=t.arrayBuffer();break;case"text":n=t.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:n=t.text();break}return n}class io extends De{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new M):e.method?e.url?new Promise((n,o)=>{const r=new XMLHttpRequest;r.open(e.method,e.url,!0),r.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,r.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(te(e.content)?r.setRequestHeader("Content-Type","application/octet-stream"):r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const s=e.headers;s&&Object.keys(s).forEach(i=>{r.setRequestHeader(i,s[i])}),e.responseType&&(r.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{r.abort(),o(new M)}),e.timeout&&(r.timeout=e.timeout),r.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),r.status>=200&&r.status<300?n(new on(r.status,r.statusText,r.response||r.responseText)):o(new Z(r.response||r.responseText||r.statusText,r.status))},r.onerror=()=>{this._logger.log(d.Warning,`Error from HTTP request. ${r.status}: ${r.statusText}.`),o(new Z(r.statusText,r.status))},r.ontimeout=()=>{this._logger.log(d.Warning,"Timeout from HTTP request."),o(new at)},r.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class ao extends De{constructor(e){if(super(),typeof fetch<"u"||x.isNode)this._httpClient=new so(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new io(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new M):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}class H{static write(e){return`${e}${H.RecordSeparator}`}static parse(e){if(e[e.length-1]!==H.RecordSeparator)throw new Error("Message is incomplete.");const n=e.split(H.RecordSeparator);return n.pop(),n}}H.RecordSeparatorCode=30;H.RecordSeparator=String.fromCharCode(H.RecordSeparatorCode);class co{writeHandshakeRequest(e){return H.write(JSON.stringify(e))}parseHandshakeResponse(e){let n,o;if(te(e)){const a=new Uint8Array(e),c=a.indexOf(H.RecordSeparatorCode);if(c===-1)throw new Error("Message is incomplete.");const l=c+1;n=String.fromCharCode.apply(null,Array.prototype.slice.call(a.slice(0,l))),o=a.byteLength>l?a.slice(l).buffer:null}else{const a=e,c=a.indexOf(H.RecordSeparator);if(c===-1)throw new Error("Message is incomplete.");const l=c+1;n=a.substring(0,l),o=a.length>l?a.substring(l):null}const r=H.parse(n),s=JSON.parse(r[0]);if(s.type)throw new Error("Expected a handshake response from the server.");return[o,s]}}var S;(function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close",t[t.Ack=8]="Ack",t[t.Sequence=9]="Sequence"})(S||(S={}));class lo{constructor(){this.observers=[]}next(e){for(const n of this.observers)n.next(e)}error(e){for(const n of this.observers)n.error&&n.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new Yn(this,e)}}class uo{constructor(e,n,o){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=n,this._bufferSize=o}async _send(e){const n=this._protocol.writeMessage(e);let o=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let r=()=>{},s=()=>{};te(n)?this._bufferedByteCount+=n.byteLength:this._bufferedByteCount+=n.length,this._bufferedByteCount>=this._bufferSize&&(o=new Promise((i,a)=>{r=i,s=a})),this._messages.push(new ho(n,this._totalMessageCount,r,s))}try{this._reconnectInProgress||await this._connection.send(n)}catch{this._disconnected()}await o}_ack(e){let n=-1;for(let o=0;o<this._messages.length;o++){const r=this._messages[o];if(r._id<=e.sequenceId)n=o,te(r._message)?this._bufferedByteCount-=r._message.byteLength:this._bufferedByteCount-=r._message.length,r._resolver();else if(this._bufferedByteCount<this._bufferSize)r._resolver();else break}n!==-1&&(this._messages=this._messages.slice(n+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type!==S.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;const n=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,n<=this._latestReceivedSequenceId?(n===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=n,this._ackTimer(),!0)}_resetSequence(e){if(e.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const e=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:S.Sequence,sequenceId:e}));const n=this._messages;for(const o of n)await this._connection.send(o._message);this._reconnectInProgress=!1}_dispose(e){e??(e=new Error("Unable to reconnect to server."));for(const n of this._messages)n._rejector(e)}_isInvocationMessage(e){switch(e.type){case S.Invocation:case S.StreamItem:case S.Completion:case S.StreamInvocation:case S.CancelInvocation:return!0;case S.Close:case S.Sequence:case S.Ping:case S.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:S.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class ho{constructor(e,n,o,r){this._message=e,this._id=n,this._resolver=o,this._rejector=r}}const fo=30*1e3,_o=15*1e3,po=1e5;var P;(function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting",t.Reconnecting="Reconnecting"})(P||(P={}));class ct{static create(e,n,o,r,s,i,a){return new ct(e,n,o,r,s,i,a)}constructor(e,n,o,r,s,i,a){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(d.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},O.isRequired(e,"connection"),O.isRequired(n,"logger"),O.isRequired(o,"protocol"),this.serverTimeoutInMilliseconds=s??fo,this.keepAliveIntervalInMilliseconds=i??_o,this._statefulReconnectBufferSize=a??po,this._logger=n,this._protocol=o,this.connection=e,this._reconnectPolicy=r,this._handshakeProtocol=new co,this.connection.onreceive=c=>this._processIncomingData(c),this.connection.onclose=c=>this._connectionClosed(c),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=P.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:S.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==P.Disconnected&&this._connectionState!==P.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==P.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=P.Connecting,this._logger.log(d.Debug,"Starting HubConnection.");try{await this._startInternal(),x.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=P.Connected,this._connectionStarted=!0,this._logger.log(d.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=P.Disconnected,this._logger.log(d.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise((n,o)=>{this._handshakeResolver=n,this._handshakeRejecter=o});await this.connection.start(this._protocol.transferFormat);try{let n=this._protocol.version;this.connection.features.reconnect||(n=1);const o={protocol:this._protocol.name,version:n};if(this._logger.log(d.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(o)),this._logger.log(d.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new uo(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(n){throw this._logger.log(d.Debug,`Hub handshake failed with error '${n}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(n),n}}async stop(){const e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch{}}_stopInternal(e){if(this._connectionState===P.Disconnected)return this._logger.log(d.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===P.Disconnecting)return this._logger.log(d.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const n=this._connectionState;return this._connectionState=P.Disconnecting,this._logger.log(d.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(d.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(n===P.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new M("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(e,...n){const[o,r]=this._replaceStreamingParams(n),s=this._createStreamInvocation(e,n,r);let i;const a=new lo;return a.cancelCallback=()=>{const c=this._createCancelInvocation(s.invocationId);return delete this._callbacks[s.invocationId],i.then(()=>this._sendWithProtocol(c))},this._callbacks[s.invocationId]=(c,l)=>{if(l){a.error(l);return}else c&&(c.type===S.Completion?c.error?a.error(new Error(c.error)):a.complete():a.next(c.item))},i=this._sendWithProtocol(s).catch(c=>{a.error(c),delete this._callbacks[s.invocationId]}),this._launchStreams(o,i),a}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...n){const[o,r]=this._replaceStreamingParams(n),s=this._sendWithProtocol(this._createInvocation(e,n,!0,r));return this._launchStreams(o,s),s}invoke(e,...n){const[o,r]=this._replaceStreamingParams(n),s=this._createInvocation(e,n,!1,r);return new Promise((a,c)=>{this._callbacks[s.invocationId]=(h,u)=>{if(u){c(u);return}else h&&(h.type===S.Completion?h.error?c(new Error(h.error)):a(h.result):c(new Error(`Unexpected message type: ${h.type}`)))};const l=this._sendWithProtocol(s).catch(h=>{c(h),delete this._callbacks[s.invocationId]});this._launchStreams(o,l)})}on(e,n){!e||!n||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(n)===-1&&this._methods[e].push(n))}off(e,n){if(!e)return;e=e.toLowerCase();const o=this._methods[e];if(o)if(n){const r=o.indexOf(n);r!==-1&&(o.splice(r,1),o.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const n=this._protocol.parseMessages(e,this._logger);for(const o of n)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(o)))switch(o.type){case S.Invocation:this._invokeClientMethod(o).catch(r=>{this._logger.log(d.Error,`Invoke client method threw error: ${We(r)}`)});break;case S.StreamItem:case S.Completion:{const r=this._callbacks[o.invocationId];if(r){o.type===S.Completion&&delete this._callbacks[o.invocationId];try{r(o)}catch(s){this._logger.log(d.Error,`Stream callback threw error: ${We(s)}`)}}break}case S.Ping:break;case S.Close:{this._logger.log(d.Information,"Close message received from server.");const r=o.error?new Error("Server returned an error on close: "+o.error):void 0;o.allowReconnect===!0?this.connection.stop(r):this._stopPromise=this._stopInternal(r);break}case S.Ack:this._messageBuffer&&this._messageBuffer._ack(o);break;case S.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(o);break;default:this._logger.log(d.Warning,`Invalid message type: ${o.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let n,o;try{[o,n]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(r){const s="Error parsing handshake response: "+r;this._logger.log(d.Error,s);const i=new Error(s);throw this._handshakeRejecter(i),i}if(n.error){const r="Server returned handshake error: "+n.error;this._logger.log(d.Error,r);const s=new Error(r);throw this._handshakeRejecter(s),s}else this._logger.log(d.Debug,"Server handshake complete.");return this._handshakeResolver(),o}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===P.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const n=e.target.toLowerCase(),o=this._methods[n];if(!o){this._logger.log(d.Warning,`No client method with the name '${n}' found.`),e.invocationId&&(this._logger.log(d.Warning,`No result given for '${n}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}const r=o.slice(),s=!!e.invocationId;let i,a,c;for(const l of r)try{const h=i;i=await l.apply(this,e.arguments),s&&i&&h&&(this._logger.log(d.Error,`Multiple results provided for '${n}'. Sending error to server.`),c=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),a=void 0}catch(h){a=h,this._logger.log(d.Error,`A callback for the method '${n}' threw error '${h}'.`)}c?await this._sendWithProtocol(c):s?(a?c=this._createCompletionMessage(e.invocationId,`${a}`,null):i!==void 0?c=this._createCompletionMessage(e.invocationId,null,i):(this._logger.log(d.Warning,`No result given for '${n}' method and invocation ID '${e.invocationId}'.`),c=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(c)):i&&this._logger.log(d.Error,`Result given for '${n}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(d.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new M("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===P.Disconnecting?this._completeClose(e):this._connectionState===P.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===P.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=P.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(e??new Error("Connection closed.")),this._messageBuffer=void 0),x.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(n=>n.apply(this,[e]))}catch(n){this._logger.log(d.Error,`An onclose callback called with error '${e}' threw error '${n}'.`)}}}async _reconnect(e){const n=Date.now();let o=0,r=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),s=this._getNextRetryDelay(o++,0,r);if(s===null){this._logger.log(d.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=P.Reconnecting,e?this._logger.log(d.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(d.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(i=>i.apply(this,[e]))}catch(i){this._logger.log(d.Error,`An onreconnecting callback called with error '${e}' threw error '${i}'.`)}if(this._connectionState!==P.Reconnecting){this._logger.log(d.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;s!==null;){if(this._logger.log(d.Information,`Reconnect attempt number ${o} will start in ${s} ms.`),await new Promise(i=>{this._reconnectDelayHandle=setTimeout(i,s)}),this._reconnectDelayHandle=void 0,this._connectionState!==P.Reconnecting){this._logger.log(d.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=P.Connected,this._logger.log(d.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(i=>i.apply(this,[this.connection.connectionId]))}catch(i){this._logger.log(d.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${i}'.`)}return}catch(i){if(this._logger.log(d.Information,`Reconnect attempt failed because of error '${i}'.`),this._connectionState!==P.Reconnecting){this._logger.log(d.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===P.Disconnecting&&this._completeClose();return}r=i instanceof Error?i:new Error(i.toString()),s=this._getNextRetryDelay(o++,Date.now()-n,r)}}this._logger.log(d.Information,`Reconnect retries have been exhausted after ${Date.now()-n} ms and ${o} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,n,o){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:n,previousRetryCount:e,retryReason:o})}catch(r){return this._logger.log(d.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${n}) threw error '${r}'.`),null}}_cancelCallbacksWithError(e){const n=this._callbacks;this._callbacks={},Object.keys(n).forEach(o=>{const r=n[o];try{r(null,e)}catch(s){this._logger.log(d.Error,`Stream 'error' callback called with '${e}' threw error: ${We(s)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,n,o,r){if(o)return r.length!==0?{arguments:n,streamIds:r,target:e,type:S.Invocation}:{arguments:n,target:e,type:S.Invocation};{const s=this._invocationId;return this._invocationId++,r.length!==0?{arguments:n,invocationId:s.toString(),streamIds:r,target:e,type:S.Invocation}:{arguments:n,invocationId:s.toString(),target:e,type:S.Invocation}}}_launchStreams(e,n){if(e.length!==0){n||(n=Promise.resolve());for(const o in e)e[o].subscribe({complete:()=>{n=n.then(()=>this._sendWithProtocol(this._createCompletionMessage(o)))},error:r=>{let s;r instanceof Error?s=r.message:r&&r.toString?s=r.toString():s="Unknown error",n=n.then(()=>this._sendWithProtocol(this._createCompletionMessage(o,s)))},next:r=>{n=n.then(()=>this._sendWithProtocol(this._createStreamItemMessage(o,r)))}})}}_replaceStreamingParams(e){const n=[],o=[];for(let r=0;r<e.length;r++){const s=e[r];if(this._isObservable(s)){const i=this._invocationId;this._invocationId++,n[i]=s,o.push(i.toString()),e.splice(r,1)}}return[n,o]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,n,o){const r=this._invocationId;return this._invocationId++,o.length!==0?{arguments:n,invocationId:r.toString(),streamIds:o,target:e,type:S.StreamInvocation}:{arguments:n,invocationId:r.toString(),target:e,type:S.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:S.CancelInvocation}}_createStreamItemMessage(e,n){return{invocationId:e,item:n,type:S.StreamItem}}_createCompletionMessage(e,n,o){return n?{error:n,invocationId:e,type:S.Completion}:{invocationId:e,result:o,type:S.Completion}}_createCloseMessage(){return{type:S.Close}}}const go=[0,2e3,1e4,3e4,null];class Rt{constructor(e){this._retryDelays=e!==void 0?[...e,null]:go}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class Y{}Y.Authorization="Authorization";Y.Cookie="Cookie";class mo extends De{constructor(e,n){super(),this._innerClient=e,this._accessTokenFactory=n}async send(e){let n=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(n=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const o=await this._innerClient.send(e);return n&&o.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):o}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[Y.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[Y.Authorization]&&delete e.headers[Y.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}var $;(function(t){t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.ServerSentEvents=2]="ServerSentEvents",t[t.LongPolling=4]="LongPolling"})($||($={}));var U;(function(t){t[t.Text=1]="Text",t[t.Binary=2]="Binary"})(U||(U={}));let bo=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class Pt{get pollAborted(){return this._pollAbort.aborted}constructor(e,n,o){this._httpClient=e,this._logger=n,this._pollAbort=new bo,this._options=o,this._running=!1,this.onreceive=null,this.onclose=null}async connect(e,n){if(O.isRequired(e,"url"),O.isRequired(n,"transferFormat"),O.isIn(n,U,"transferFormat"),this._url=e,this._logger.log(d.Trace,"(LongPolling transport) Connecting."),n===U.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[o,r]=re(),s={[o]:r,...this._options.headers},i={abortSignal:this._pollAbort.signal,headers:s,timeout:1e5,withCredentials:this._options.withCredentials};n===U.Binary&&(i.responseType="arraybuffer");const a=`${e}&_=${Date.now()}`;this._logger.log(d.Trace,`(LongPolling transport) polling: ${a}.`);const c=await this._httpClient.get(a,i);c.statusCode!==200?(this._logger.log(d.Error,`(LongPolling transport) Unexpected response code: ${c.statusCode}.`),this._closeError=new Z(c.statusText||"",c.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,i)}async _poll(e,n){try{for(;this._running;)try{const o=`${e}&_=${Date.now()}`;this._logger.log(d.Trace,`(LongPolling transport) polling: ${o}.`);const r=await this._httpClient.get(o,n);r.statusCode===204?(this._logger.log(d.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):r.statusCode!==200?(this._logger.log(d.Error,`(LongPolling transport) Unexpected response code: ${r.statusCode}.`),this._closeError=new Z(r.statusText||"",r.statusCode),this._running=!1):r.content?(this._logger.log(d.Trace,`(LongPolling transport) data received. ${fe(r.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(r.content)):this._logger.log(d.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(o){this._running?o instanceof at?this._logger.log(d.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=o,this._running=!1):this._logger.log(d.Trace,`(LongPolling transport) Poll errored after shutdown: ${o.message}`)}}finally{this._logger.log(d.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?rn(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(d.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(d.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[n,o]=re();e[n]=o;const r={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let s;try{await this._httpClient.delete(this._url,r)}catch(i){s=i}s?s instanceof Z&&(s.statusCode===404?this._logger.log(d.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(d.Trace,`(LongPolling transport) Error sending a DELETE request: ${s}`)):this._logger.log(d.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(d.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(d.Trace,e),this.onclose(this._closeError)}}}class wo{constructor(e,n,o,r){this._httpClient=e,this._accessToken=n,this._logger=o,this._options=r,this.onreceive=null,this.onclose=null}async connect(e,n){return O.isRequired(e,"url"),O.isRequired(n,"transferFormat"),O.isIn(n,U,"transferFormat"),this._logger.log(d.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((o,r)=>{let s=!1;if(n!==U.Text){r(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let i;if(x.isBrowser||x.isWebWorker)i=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const a=this._httpClient.getCookieString(e),c={};c.Cookie=a;const[l,h]=re();c[l]=h,i=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...c,...this._options.headers}})}try{i.onmessage=a=>{if(this.onreceive)try{this._logger.log(d.Trace,`(SSE transport) data received. ${fe(a.data,this._options.logMessageContent)}.`),this.onreceive(a.data)}catch(c){this._close(c);return}},i.onerror=a=>{s?this._close():r(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},i.onopen=()=>{this._logger.log(d.Information,`SSE connected to ${this._url}`),this._eventSource=i,s=!0,o()}}catch(a){r(a);return}})}async send(e){return this._eventSource?rn(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class yo{constructor(e,n,o,r,s,i){this._logger=o,this._accessTokenFactory=n,this._logMessageContent=r,this._webSocketConstructor=s,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=i}async connect(e,n){O.isRequired(e,"url"),O.isRequired(n,"transferFormat"),O.isIn(n,U,"transferFormat"),this._logger.log(d.Trace,"(WebSockets transport) Connecting.");let o;return this._accessTokenFactory&&(o=await this._accessTokenFactory()),new Promise((r,s)=>{e=e.replace(/^http/,"ws");let i;const a=this._httpClient.getCookieString(e);let c=!1;if(x.isNode||x.isReactNative){const l={},[h,u]=re();l[h]=u,o&&(l[Y.Authorization]=`Bearer ${o}`),a&&(l[Y.Cookie]=a),i=new this._webSocketConstructor(e,void 0,{headers:{...l,...this._headers}})}else o&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(o)}`);i||(i=new this._webSocketConstructor(e)),n===U.Binary&&(i.binaryType="arraybuffer"),i.onopen=l=>{this._logger.log(d.Information,`WebSocket connected to ${e}.`),this._webSocket=i,c=!0,r()},i.onerror=l=>{let h=null;typeof ErrorEvent<"u"&&l instanceof ErrorEvent?h=l.error:h="There was an error with the transport",this._logger.log(d.Information,`(WebSockets transport) ${h}.`)},i.onmessage=l=>{if(this._logger.log(d.Trace,`(WebSockets transport) data received. ${fe(l.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(l.data)}catch(h){this._close(h);return}},i.onclose=l=>{if(c)this._close(l);else{let h=null;typeof ErrorEvent<"u"&&l instanceof ErrorEvent?h=l.error:h="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",s(new Error(h))}}})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(d.Trace,`(WebSockets transport) sending data. ${fe(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(d.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}}const xt=100;class So{constructor(e,n={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,O.isRequired(e,"url"),this._logger=Zn(n.logger),this.baseUrl=this._resolveUrl(e),n=n||{},n.logMessageContent=n.logMessageContent===void 0?!1:n.logMessageContent,typeof n.withCredentials=="boolean"||n.withCredentials===void 0)n.withCredentials=n.withCredentials===void 0?!0:n.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");n.timeout=n.timeout===void 0?100*1e3:n.timeout;let o=null,r=null;if(x.isNode&&typeof require<"u"){const s=typeof __webpack_require__=="function"?__non_webpack_require__:require;o=s("ws"),r=s("eventsource")}!x.isNode&&typeof WebSocket<"u"&&!n.WebSocket?n.WebSocket=WebSocket:x.isNode&&!n.WebSocket&&o&&(n.WebSocket=o),!x.isNode&&typeof EventSource<"u"&&!n.EventSource?n.EventSource=EventSource:x.isNode&&!n.EventSource&&typeof r<"u"&&(n.EventSource=r),this._httpClient=new mo(n.httpClient||new ao(this._logger),n.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=n,this.onreceive=null,this.onclose=null}async start(e){if(e=e||U.Binary,O.isIn(e,U,"transferFormat"),this._logger.log(d.Debug,`Starting connection with transfer format '${U[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,this._connectionState==="Disconnecting"){const n="Failed to start the HttpConnection before stop() was called.";return this._logger.log(d.Error,n),await this._stopPromise,Promise.reject(new M(n))}else if(this._connectionState!=="Connected"){const n="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(d.Error,n),Promise.reject(new M(n))}this._connectionStarted=!0}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new lt(this.transport)),this._sendQueue.send(e))}async stop(e){if(this._connectionState==="Disconnected")return this._logger.log(d.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(d.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(n=>{this._stopPromiseResolver=n}),await this._stopInternal(e),await this._stopPromise}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(n){this._logger.log(d.Error,`HttpConnection.transport.stop() threw error '${n}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(d.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let n=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===$.WebSockets)this.transport=this._constructTransport($.WebSockets),await this._startTransport(n,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let o=null,r=0;do{if(o=await this._getNegotiationResponse(n),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new M("The connection was stopped during negotiation.");if(o.error)throw new Error(o.error);if(o.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(o.url&&(n=o.url),o.accessToken){const s=o.accessToken;this._accessTokenFactory=()=>s,this._httpClient._accessToken=s,this._httpClient._accessTokenFactory=void 0}r++}while(o.url&&r<xt);if(r===xt&&o.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(n,this._options.transport,o,e)}this.transport instanceof Pt&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(d.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(o){return this._logger.log(d.Error,"Failed to start the connection: "+o),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(o)}}async _getNegotiationResponse(e){const n={},[o,r]=re();n[o]=r;const s=this._resolveNegotiateUrl(e);this._logger.log(d.Debug,`Sending negotiation request: ${s}.`);try{const i=await this._httpClient.post(s,{content:"",headers:{...n,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(i.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${i.statusCode}'`));const a=JSON.parse(i.content);return(!a.negotiateVersion||a.negotiateVersion<1)&&(a.connectionToken=a.connectionId),a.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new kt("Client didn't negotiate Stateful Reconnect but the server did.")):a}catch(i){let a="Failed to complete negotiation with the server: "+i;return i instanceof Z&&i.statusCode===404&&(a=a+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(d.Error,a),Promise.reject(new kt(a))}}_createConnectUrl(e,n){return n?e+(e.indexOf("?")===-1?"?":"&")+`id=${n}`:e}async _createTransport(e,n,o,r){let s=this._createConnectUrl(e,o.connectionToken);if(this._isITransport(n)){this._logger.log(d.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=n,await this._startTransport(s,r),this.connectionId=o.connectionId;return}const i=[],a=o.availableTransports||[];let c=o;for(const l of a){const h=this._resolveTransportOrError(l,n,r,c?.useStatefulReconnect===!0);if(h instanceof Error)i.push(`${l.transport} failed:`),i.push(h);else if(this._isITransport(h)){if(this.transport=h,!c){try{c=await this._getNegotiationResponse(e)}catch(u){return Promise.reject(u)}s=this._createConnectUrl(e,c.connectionToken)}try{await this._startTransport(s,r),this.connectionId=c.connectionId;return}catch(u){if(this._logger.log(d.Error,`Failed to start the transport '${l.transport}': ${u}`),c=void 0,i.push(new Kn(`${l.transport} failed: ${u}`,$[l.transport])),this._connectionState!=="Connecting"){const g="Failed to select transport before stop() was called.";return this._logger.log(d.Debug,g),Promise.reject(new M(g))}}}}return i.length>0?Promise.reject(new Xn(`Unable to connect to the server with any of the available transports. ${i.join(" ")}`,i)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case $.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new yo(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case $.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new wo(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case $.LongPolling:return new Pt(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,n){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async o=>{let r=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(e,n),await this.features.resend()}catch{r=!0}else{this._stopConnection(o);return}r&&this._stopConnection(o)}:this.transport.onclose=o=>this._stopConnection(o),this.transport.connect(e,n)}_resolveTransportOrError(e,n,o,r){const s=$[e.transport];if(s==null)return this._logger.log(d.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(Co(n,s))if(e.transferFormats.map(a=>U[a]).indexOf(o)>=0){if(s===$.WebSockets&&!this._options.WebSocket||s===$.ServerSentEvents&&!this._options.EventSource)return this._logger.log(d.Debug,`Skipping transport '${$[s]}' because it is not supported in your environment.'`),new Jn(`'${$[s]}' is not supported in your environment.`,s);this._logger.log(d.Debug,`Selecting transport '${$[s]}'.`);try{return this.features.reconnect=s===$.WebSockets?r:void 0,this._constructTransport(s)}catch(a){return a}}else return this._logger.log(d.Debug,`Skipping transport '${$[s]}' because it does not support the requested transfer format '${U[o]}'.`),new Error(`'${$[s]}' does not support ${U[o]}.`);else return this._logger.log(d.Debug,`Skipping transport '${$[s]}' because it was disabled by the client.`),new Vn(`'${$[s]}' is disabled by the client.`,s)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(d.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(d.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(d.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(d.Error,`Connection disconnected with error '${e}'.`):this._logger.log(d.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(n=>{this._logger.log(d.Error,`TransportSendQueue.stop() threw error '${n}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(n){this._logger.log(d.Error,`HttpConnection.onclose(${e}) threw error '${n}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!x.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const n=window.document.createElement("a");return n.href=e,this._logger.log(d.Information,`Normalizing '${e}' to '${n.href}'.`),n.href}_resolveNegotiateUrl(e){const n=new URL(e);n.pathname.endsWith("/")?n.pathname+="negotiate":n.pathname+="/negotiate";const o=new URLSearchParams(n.searchParams);return o.has("negotiateVersion")||o.append("negotiateVersion",this._negotiateVersion.toString()),o.has("useStatefulReconnect")?o.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&o.append("useStatefulReconnect","true"),n.search=o.toString(),n.toString()}}function Co(t,e){return!t||(e&t)!==0}class lt{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new be,this._transportResult=new be,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new be),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new be;const e=this._transportResult;this._transportResult=void 0;const n=typeof this._buffer[0]=="string"?this._buffer.join(""):lt._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(n),e.resolve()}catch(o){e.reject(o)}}}static _concatBuffers(e){const n=e.map(s=>s.byteLength).reduce((s,i)=>s+i),o=new Uint8Array(n);let r=0;for(const s of e)o.set(new Uint8Array(s),r),r+=s.byteLength;return o.buffer}}class be{constructor(){this.promise=new Promise((e,n)=>[this._resolver,this._rejecter]=[e,n])}resolve(){this._resolver()}reject(e){this._rejecter(e)}}const Eo="json";class vo{constructor(){this.name=Eo,this.version=2,this.transferFormat=U.Text}parseMessages(e,n){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];n===null&&(n=he.instance);const o=H.parse(e),r=[];for(const s of o){const i=JSON.parse(s);if(typeof i.type!="number")throw new Error("Invalid payload.");switch(i.type){case S.Invocation:this._isInvocationMessage(i);break;case S.StreamItem:this._isStreamItemMessage(i);break;case S.Completion:this._isCompletionMessage(i);break;case S.Ping:break;case S.Close:break;case S.Ack:this._isAckMessage(i);break;case S.Sequence:this._isSequenceMessage(i);break;default:n.log(d.Information,"Unknown message type '"+i.type+"' ignored.");continue}r.push(i)}return r}writeMessage(e){return H.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,n){if(typeof e!="string"||e==="")throw new Error(n)}}const ko={trace:d.Trace,debug:d.Debug,info:d.Information,information:d.Information,warn:d.Warning,warning:d.Warning,error:d.Error,critical:d.Critical,none:d.None};function To(t){const e=ko[t.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${t}`)}class Ro{configureLogging(e){if(O.isRequired(e,"logging"),Po(e))this.logger=e;else if(typeof e=="string"){const n=To(e);this.logger=new Re(n)}else this.logger=new Re(e);return this}withUrl(e,n){return O.isRequired(e,"url"),O.isNotEmpty(e,"url"),this.url=e,typeof n=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...n}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:n},this}withHubProtocol(e){return O.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new Rt(e):this.reconnectPolicy=e:this.reconnectPolicy=new Rt,this}withServerTimeout(e){return O.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return O.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=e?.bufferSize,this}build(){const e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const n=new So(this.url,e);return ct.create(n,this.logger||he.instance,this.protocol||new vo,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function Po(t){return t.log!==void 0}function xo(t){return new Ro().withUrl(`http://localhost:5151/chathub?sessionId=${encodeURIComponent(t)}`).withAutomaticReconnect().build()}const Io=()=>E("header",{class:"bg-gradient-to-r from-[#43319A] to-[#6E6EC5] px-2 py-6 rounded-t-3xl flex items-center shadow gap-3",children:[E("img",{src:"logo.png",alt:"",className:"h-10 w-10"}),E("div",{className:"flex flex-col gap-2",children:[E("h2",{class:"text-white font-bold text-2xl",children:"Capsibot"}),E("span",{className:"text-white leading-4.5",children:"A live chat interface that allows for seamless, natural communication and connection."})]})]}),Ao=({messages:t})=>E("div",{class:"space-y-3 px-1 py-2 max-h-105 overflow-y-auto scrollbar-thin scrollbar-thumb-indigo-400",children:t.map((e,n)=>E("div",{class:`flex ${e.sender==="customer"?"justify-end":"justify-start"}`,children:E("div",{class:`p-2 max-w-[70%] break-words text-sm font-normal
            ${e.sender==="customer"?"text-[#44329B] border-1 rounded-b-2xl rounded-tl-2xl  border-[#44329B]":"bg-[#F4F4F4] rounded-b-2xl rounded-tr-2xl text-[#171717]"}`,children:e.message})},n))}),Do=({options:t,onSelect:e})=>t.length>0?E("div",{class:"flex flex-col items-end gap-2 my-2 mx-2",children:[t.map((n,o)=>E("button",{onClick:()=>e(n.question),class:" rounded-3xl border border-[#A3B9FA] p-2 bg-[#FFFFFF] text-[#6D6CC4] font-normal text-sm hover:bg-indigo-50 active:bg-indigo-100 transition cursor-pointer",children:n.question},o)),E("button",{class:" rounded-3xl border border-[#A3B9FA] p-2 bg-[#FFFFFF] text-[#6D6CC4] font-normal text-sm hover:bg-indigo-50 active:bg-indigo-100 transition cursor-pointer",children:"Talk to someone"})]}):null,Oo=({messages:t,options:e,onSelect:n,inLiveChat:o,scrollRef:r})=>E("main",{class:"flex-1 bg-white py-2 px-1 overflow-y-auto rounded-b-none",children:[E(Ao,{messages:t}),!o&&E(Do,{options:e,onSelect:n}),E("div",{ref:r})]}),$o=({inLiveChat:t,input:e,setInput:n,onSend:o,canSend:r,onEscalate:s,backAvailable:i,onBack:a})=>E("footer",{class:"bg-white rounded-b-3xl px-2 py-3 flex flex-col gap-4 border-1 border-white border-t-gray-100",children:[!t&&E("div",{class:"flex w-full gap-3 mb-2",children:[i&&E("button",{onClick:a,class:"flex-1 rounded-lg bg-gray-200 py-2 font-medium hover:bg-gray-300 transition ring-1 ring-gray-200",children:"Back"}),E("button",{onClick:s,class:"flex-1 rounded-lg bg-gradient-to-r from-pink-600 via-red-600 to-yellow-400 text-white py-2 font-bold shadow-lg transition focus:outline-none hover:scale-105",children:"Talk to someone"})]}),t&&E("div",{class:"flex border-1 border-gray-200 focus:ring-1 focus:ring-gray-100 rounded-xl",children:[E("input",{value:e,onInput:c=>n(c.target.value),type:"text",placeholder:"Let's share something",onKeyDown:c=>c.key==="Enter"&&r&&o(),class:"flex-1 px-3 py-2 outline-none"}),E("button",{onClick:o,disabled:!r,class:`rounded-lg px-2 text-white font-semibold 
            ${r?"":"opacity-50 cursor-not-allowed"}`,children:E("img",{src:"Button.png",alt:""})})]})]});function sn(t,e){return function(){return t.apply(e,arguments)}}const{toString:No}=Object.prototype,{getPrototypeOf:ut}=Object,{iterator:Oe,toStringTag:an}=Symbol,$e=(t=>e=>{const n=No.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),j=t=>(t=t.toLowerCase(),e=>$e(e)===t),Ne=t=>e=>typeof e===t,{isArray:se}=Array,de=Ne("undefined");function Uo(t){return t!==null&&!de(t)&&t.constructor!==null&&!de(t.constructor)&&L(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const cn=j("ArrayBuffer");function Fo(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&cn(t.buffer),e}const Lo=Ne("string"),L=Ne("function"),ln=Ne("number"),Ue=t=>t!==null&&typeof t=="object",Bo=t=>t===!0||t===!1,Ce=t=>{if($e(t)!=="object")return!1;const e=ut(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(an in t)&&!(Oe in t)},Ho=j("Date"),Mo=j("File"),jo=j("Blob"),Wo=j("FileList"),qo=t=>Ue(t)&&L(t.pipe),zo=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||L(t.append)&&((e=$e(t))==="formdata"||e==="object"&&L(t.toString)&&t.toString()==="[object FormData]"))},Jo=j("URLSearchParams"),[Vo,Ko,Xo,Go]=["ReadableStream","Request","Response","Headers"].map(j),Qo=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function pe(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let o,r;if(typeof t!="object"&&(t=[t]),se(t))for(o=0,r=t.length;o<r;o++)e.call(null,t[o],o,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),i=s.length;let a;for(o=0;o<i;o++)a=s[o],e.call(null,t[a],a,t)}}function un(t,e){e=e.toLowerCase();const n=Object.keys(t);let o=n.length,r;for(;o-- >0;)if(r=n[o],e===r.toLowerCase())return r;return null}const Q=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,hn=t=>!de(t)&&t!==Q;function Ge(){const{caseless:t}=hn(this)&&this||{},e={},n=(o,r)=>{const s=t&&un(e,r)||r;Ce(e[s])&&Ce(o)?e[s]=Ge(e[s],o):Ce(o)?e[s]=Ge({},o):se(o)?e[s]=o.slice():e[s]=o};for(let o=0,r=arguments.length;o<r;o++)arguments[o]&&pe(arguments[o],n);return e}const Zo=(t,e,n,{allOwnKeys:o}={})=>(pe(e,(r,s)=>{n&&L(r)?t[s]=sn(r,n):t[s]=r},{allOwnKeys:o}),t),Yo=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),er=(t,e,n,o)=>{t.prototype=Object.create(e.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},tr=(t,e,n,o)=>{let r,s,i;const a={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),s=r.length;s-- >0;)i=r[s],(!o||o(i,t,e))&&!a[i]&&(e[i]=t[i],a[i]=!0);t=n!==!1&&ut(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},nr=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const o=t.indexOf(e,n);return o!==-1&&o===n},or=t=>{if(!t)return null;if(se(t))return t;let e=t.length;if(!ln(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},rr=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&ut(Uint8Array)),sr=(t,e)=>{const o=(t&&t[Oe]).call(t);let r;for(;(r=o.next())&&!r.done;){const s=r.value;e.call(t,s[0],s[1])}},ir=(t,e)=>{let n;const o=[];for(;(n=t.exec(e))!==null;)o.push(n);return o},ar=j("HTMLFormElement"),cr=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,r){return o.toUpperCase()+r}),It=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),lr=j("RegExp"),fn=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),o={};pe(n,(r,s)=>{let i;(i=e(r,s,t))!==!1&&(o[s]=i||r)}),Object.defineProperties(t,o)},ur=t=>{fn(t,(e,n)=>{if(L(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=t[n];if(L(o)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},hr=(t,e)=>{const n={},o=r=>{r.forEach(s=>{n[s]=!0})};return se(t)?o(t):o(String(t).split(e)),n},fr=()=>{},dr=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function _r(t){return!!(t&&L(t.append)&&t[an]==="FormData"&&t[Oe])}const pr=t=>{const e=new Array(10),n=(o,r)=>{if(Ue(o)){if(e.indexOf(o)>=0)return;if(!("toJSON"in o)){e[r]=o;const s=se(o)?[]:{};return pe(o,(i,a)=>{const c=n(i,r+1);!de(c)&&(s[a]=c)}),e[r]=void 0,s}}return o};return n(t,0)},gr=j("AsyncFunction"),mr=t=>t&&(Ue(t)||L(t))&&L(t.then)&&L(t.catch),dn=((t,e)=>t?setImmediate:e?((n,o)=>(Q.addEventListener("message",({source:r,data:s})=>{r===Q&&s===n&&o.length&&o.shift()()},!1),r=>{o.push(r),Q.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",L(Q.postMessage)),br=typeof queueMicrotask<"u"?queueMicrotask.bind(Q):typeof process<"u"&&process.nextTick||dn,wr=t=>t!=null&&L(t[Oe]),f={isArray:se,isArrayBuffer:cn,isBuffer:Uo,isFormData:zo,isArrayBufferView:Fo,isString:Lo,isNumber:ln,isBoolean:Bo,isObject:Ue,isPlainObject:Ce,isReadableStream:Vo,isRequest:Ko,isResponse:Xo,isHeaders:Go,isUndefined:de,isDate:Ho,isFile:Mo,isBlob:jo,isRegExp:lr,isFunction:L,isStream:qo,isURLSearchParams:Jo,isTypedArray:rr,isFileList:Wo,forEach:pe,merge:Ge,extend:Zo,trim:Qo,stripBOM:Yo,inherits:er,toFlatObject:tr,kindOf:$e,kindOfTest:j,endsWith:nr,toArray:or,forEachEntry:sr,matchAll:ir,isHTMLForm:ar,hasOwnProperty:It,hasOwnProp:It,reduceDescriptors:fn,freezeMethods:ur,toObjectSet:hr,toCamelCase:cr,noop:fr,toFiniteNumber:dr,findKey:un,global:Q,isContextDefined:hn,isSpecCompliantForm:_r,toJSONObject:pr,isAsyncFn:gr,isThenable:mr,setImmediate:dn,asap:br,isIterable:wr};function C(t,e,n,o,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),o&&(this.request=o),r&&(this.response=r,this.status=r.status?r.status:null)}f.inherits(C,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:f.toJSONObject(this.config),code:this.code,status:this.status}}});const _n=C.prototype,pn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{pn[t]={value:t}});Object.defineProperties(C,pn);Object.defineProperty(_n,"isAxiosError",{value:!0});C.from=(t,e,n,o,r,s)=>{const i=Object.create(_n);return f.toFlatObject(t,i,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),C.call(i,t.message,e,n,o,r),i.cause=t,i.name=t.name,s&&Object.assign(i,s),i};const yr=null;function Qe(t){return f.isPlainObject(t)||f.isArray(t)}function gn(t){return f.endsWith(t,"[]")?t.slice(0,-2):t}function At(t,e,n){return t?t.concat(e).map(function(r,s){return r=gn(r),!n&&s?"["+r+"]":r}).join(n?".":""):e}function Sr(t){return f.isArray(t)&&!t.some(Qe)}const Cr=f.toFlatObject(f,{},null,function(e){return/^is[A-Z]/.test(e)});function Fe(t,e,n){if(!f.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=f.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,p){return!f.isUndefined(p[w])});const o=n.metaTokens,r=n.visitor||h,s=n.dots,i=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&f.isSpecCompliantForm(e);if(!f.isFunction(r))throw new TypeError("visitor must be a function");function l(_){if(_===null)return"";if(f.isDate(_))return _.toISOString();if(f.isBoolean(_))return _.toString();if(!c&&f.isBlob(_))throw new C("Blob is not supported. Use a Buffer instead.");return f.isArrayBuffer(_)||f.isTypedArray(_)?c&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function h(_,w,p){let y=_;if(_&&!p&&typeof _=="object"){if(f.endsWith(w,"{}"))w=o?w:w.slice(0,-2),_=JSON.stringify(_);else if(f.isArray(_)&&Sr(_)||(f.isFileList(_)||f.endsWith(w,"[]"))&&(y=f.toArray(_)))return w=gn(w),y.forEach(function(v,k){!(f.isUndefined(v)||v===null)&&e.append(i===!0?At([w],k,s):i===null?w:w+"[]",l(v))}),!1}return Qe(_)?!0:(e.append(At(p,w,s),l(_)),!1)}const u=[],g=Object.assign(Cr,{defaultVisitor:h,convertValue:l,isVisitable:Qe});function m(_,w){if(!f.isUndefined(_)){if(u.indexOf(_)!==-1)throw Error("Circular reference detected in "+w.join("."));u.push(_),f.forEach(_,function(y,b){(!(f.isUndefined(y)||y===null)&&r.call(e,y,f.isString(b)?b.trim():b,w,g))===!0&&m(y,w?w.concat(b):[b])}),u.pop()}}if(!f.isObject(t))throw new TypeError("data must be an object");return m(t),e}function Dt(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(o){return e[o]})}function ht(t,e){this._pairs=[],t&&Fe(t,this,e)}const mn=ht.prototype;mn.append=function(e,n){this._pairs.push([e,n])};mn.toString=function(e){const n=e?function(o){return e.call(this,o,Dt)}:Dt;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function Er(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function bn(t,e,n){if(!e)return t;const o=n&&n.encode||Er;f.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(r?s=r(e,n):s=f.isURLSearchParams(e)?e.toString():new ht(e,n).toString(o),s){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Ot{constructor(){this.handlers=[]}use(e,n,o){return this.handlers.push({fulfilled:e,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){f.forEach(this.handlers,function(o){o!==null&&e(o)})}}const wn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vr=typeof URLSearchParams<"u"?URLSearchParams:ht,kr=typeof FormData<"u"?FormData:null,Tr=typeof Blob<"u"?Blob:null,Rr={isBrowser:!0,classes:{URLSearchParams:vr,FormData:kr,Blob:Tr},protocols:["http","https","file","blob","url","data"]},ft=typeof window<"u"&&typeof document<"u",Ze=typeof navigator=="object"&&navigator||void 0,Pr=ft&&(!Ze||["ReactNative","NativeScript","NS"].indexOf(Ze.product)<0),xr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ir=ft&&window.location.href||"http://localhost",Ar=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ft,hasStandardBrowserEnv:Pr,hasStandardBrowserWebWorkerEnv:xr,navigator:Ze,origin:Ir},Symbol.toStringTag,{value:"Module"})),F={...Ar,...Rr};function Dr(t,e){return Fe(t,new F.classes.URLSearchParams,Object.assign({visitor:function(n,o,r,s){return F.isNode&&f.isBuffer(n)?(this.append(o,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function Or(t){return f.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function $r(t){const e={},n=Object.keys(t);let o;const r=n.length;let s;for(o=0;o<r;o++)s=n[o],e[s]=t[s];return e}function yn(t){function e(n,o,r,s){let i=n[s++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),c=s>=n.length;return i=!i&&f.isArray(r)?r.length:i,c?(f.hasOwnProp(r,i)?r[i]=[r[i],o]:r[i]=o,!a):((!r[i]||!f.isObject(r[i]))&&(r[i]=[]),e(n,o,r[i],s)&&f.isArray(r[i])&&(r[i]=$r(r[i])),!a)}if(f.isFormData(t)&&f.isFunction(t.entries)){const n={};return f.forEachEntry(t,(o,r)=>{e(Or(o),r,n,0)}),n}return null}function Nr(t,e,n){if(f.isString(t))try{return(e||JSON.parse)(t),f.trim(t)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(t)}const ge={transitional:wn,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const o=n.getContentType()||"",r=o.indexOf("application/json")>-1,s=f.isObject(e);if(s&&f.isHTMLForm(e)&&(e=new FormData(e)),f.isFormData(e))return r?JSON.stringify(yn(e)):e;if(f.isArrayBuffer(e)||f.isBuffer(e)||f.isStream(e)||f.isFile(e)||f.isBlob(e)||f.isReadableStream(e))return e;if(f.isArrayBufferView(e))return e.buffer;if(f.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(o.indexOf("application/x-www-form-urlencoded")>-1)return Dr(e,this.formSerializer).toString();if((a=f.isFileList(e))||o.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Fe(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),Nr(e)):e}],transformResponse:[function(e){const n=this.transitional||ge.transitional,o=n&&n.forcedJSONParsing,r=this.responseType==="json";if(f.isResponse(e)||f.isReadableStream(e))return e;if(e&&f.isString(e)&&(o&&!this.responseType||r)){const i=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?C.from(a,C.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:F.classes.FormData,Blob:F.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};f.forEach(["delete","get","head","post","put","patch"],t=>{ge.headers[t]={}});const Ur=f.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Fr=t=>{const e={};let n,o,r;return t&&t.split(`
`).forEach(function(i){r=i.indexOf(":"),n=i.substring(0,r).trim().toLowerCase(),o=i.substring(r+1).trim(),!(!n||e[n]&&Ur[n])&&(n==="set-cookie"?e[n]?e[n].push(o):e[n]=[o]:e[n]=e[n]?e[n]+", "+o:o)}),e},$t=Symbol("internals");function ce(t){return t&&String(t).trim().toLowerCase()}function Ee(t){return t===!1||t==null?t:f.isArray(t)?t.map(Ee):String(t)}function Lr(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(t);)e[o[1]]=o[2];return e}const Br=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function qe(t,e,n,o,r){if(f.isFunction(o))return o.call(this,e,n);if(r&&(e=n),!!f.isString(e)){if(f.isString(o))return e.indexOf(o)!==-1;if(f.isRegExp(o))return o.test(e)}}function Hr(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,o)=>n.toUpperCase()+o)}function Mr(t,e){const n=f.toCamelCase(" "+e);["get","set","has"].forEach(o=>{Object.defineProperty(t,o+n,{value:function(r,s,i){return this[o].call(this,e,r,s,i)},configurable:!0})})}let B=class{constructor(e){e&&this.set(e)}set(e,n,o){const r=this;function s(a,c,l){const h=ce(c);if(!h)throw new Error("header name must be a non-empty string");const u=f.findKey(r,h);(!u||r[u]===void 0||l===!0||l===void 0&&r[u]!==!1)&&(r[u||c]=Ee(a))}const i=(a,c)=>f.forEach(a,(l,h)=>s(l,h,c));if(f.isPlainObject(e)||e instanceof this.constructor)i(e,n);else if(f.isString(e)&&(e=e.trim())&&!Br(e))i(Fr(e),n);else if(f.isObject(e)&&f.isIterable(e)){let a={},c,l;for(const h of e){if(!f.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[l=h[0]]=(c=a[l])?f.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}i(a,n)}else e!=null&&s(n,e,o);return this}get(e,n){if(e=ce(e),e){const o=f.findKey(this,e);if(o){const r=this[o];if(!n)return r;if(n===!0)return Lr(r);if(f.isFunction(n))return n.call(this,r,o);if(f.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ce(e),e){const o=f.findKey(this,e);return!!(o&&this[o]!==void 0&&(!n||qe(this,this[o],o,n)))}return!1}delete(e,n){const o=this;let r=!1;function s(i){if(i=ce(i),i){const a=f.findKey(o,i);a&&(!n||qe(o,o[a],a,n))&&(delete o[a],r=!0)}}return f.isArray(e)?e.forEach(s):s(e),r}clear(e){const n=Object.keys(this);let o=n.length,r=!1;for(;o--;){const s=n[o];(!e||qe(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const n=this,o={};return f.forEach(this,(r,s)=>{const i=f.findKey(o,s);if(i){n[i]=Ee(r),delete n[s];return}const a=e?Hr(s):String(s).trim();a!==s&&delete n[s],n[a]=Ee(r),o[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return f.forEach(this,(o,r)=>{o!=null&&o!==!1&&(n[r]=e&&f.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const o=new this(e);return n.forEach(r=>o.set(r)),o}static accessor(e){const o=(this[$t]=this[$t]={accessors:{}}).accessors,r=this.prototype;function s(i){const a=ce(i);o[a]||(Mr(r,i),o[a]=!0)}return f.isArray(e)?e.forEach(s):s(e),this}};B.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);f.reduceDescriptors(B.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(o){this[n]=o}}});f.freezeMethods(B);function ze(t,e){const n=this||ge,o=e||n,r=B.from(o.headers);let s=o.data;return f.forEach(t,function(a){s=a.call(n,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function Sn(t){return!!(t&&t.__CANCEL__)}function ie(t,e,n){C.call(this,t??"canceled",C.ERR_CANCELED,e,n),this.name="CanceledError"}f.inherits(ie,C,{__CANCEL__:!0});function Cn(t,e,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?t(n):e(new C("Request failed with status code "+n.status,[C.ERR_BAD_REQUEST,C.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function jr(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Wr(t,e){t=t||10;const n=new Array(t),o=new Array(t);let r=0,s=0,i;return e=e!==void 0?e:1e3,function(c){const l=Date.now(),h=o[s];i||(i=l),n[r]=c,o[r]=l;let u=s,g=0;for(;u!==r;)g+=n[u++],u=u%t;if(r=(r+1)%t,r===s&&(s=(s+1)%t),l-i<e)return;const m=h&&l-h;return m?Math.round(g*1e3/m):void 0}}function qr(t,e){let n=0,o=1e3/e,r,s;const i=(l,h=Date.now())=>{n=h,r=null,s&&(clearTimeout(s),s=null),t.apply(null,l)};return[(...l)=>{const h=Date.now(),u=h-n;u>=o?i(l,h):(r=l,s||(s=setTimeout(()=>{s=null,i(r)},o-u)))},()=>r&&i(r)]}const Pe=(t,e,n=3)=>{let o=0;const r=Wr(50,250);return qr(s=>{const i=s.loaded,a=s.lengthComputable?s.total:void 0,c=i-o,l=r(c),h=i<=a;o=i;const u={loaded:i,total:a,progress:a?i/a:void 0,bytes:c,rate:l||void 0,estimated:l&&a&&h?(a-i)/l:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(u)},n)},Nt=(t,e)=>{const n=t!=null;return[o=>e[0]({lengthComputable:n,total:t,loaded:o}),e[1]]},Ut=t=>(...e)=>f.asap(()=>t(...e)),zr=F.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,F.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(F.origin),F.navigator&&/(msie|trident)/i.test(F.navigator.userAgent)):()=>!0,Jr=F.hasStandardBrowserEnv?{write(t,e,n,o,r,s){const i=[t+"="+encodeURIComponent(e)];f.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),f.isString(o)&&i.push("path="+o),f.isString(r)&&i.push("domain="+r),s===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Vr(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Kr(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function En(t,e,n){let o=!Vr(e);return t&&(o||n==!1)?Kr(t,e):e}const Ft=t=>t instanceof B?{...t}:t;function ne(t,e){e=e||{};const n={};function o(l,h,u,g){return f.isPlainObject(l)&&f.isPlainObject(h)?f.merge.call({caseless:g},l,h):f.isPlainObject(h)?f.merge({},h):f.isArray(h)?h.slice():h}function r(l,h,u,g){if(f.isUndefined(h)){if(!f.isUndefined(l))return o(void 0,l,u,g)}else return o(l,h,u,g)}function s(l,h){if(!f.isUndefined(h))return o(void 0,h)}function i(l,h){if(f.isUndefined(h)){if(!f.isUndefined(l))return o(void 0,l)}else return o(void 0,h)}function a(l,h,u){if(u in e)return o(l,h);if(u in t)return o(void 0,l)}const c={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(l,h,u)=>r(Ft(l),Ft(h),u,!0)};return f.forEach(Object.keys(Object.assign({},t,e)),function(h){const u=c[h]||r,g=u(t[h],e[h],h);f.isUndefined(g)&&u!==a||(n[h]=g)}),n}const vn=t=>{const e=ne({},t);let{data:n,withXSRFToken:o,xsrfHeaderName:r,xsrfCookieName:s,headers:i,auth:a}=e;e.headers=i=B.from(i),e.url=bn(En(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(f.isFormData(n)){if(F.hasStandardBrowserEnv||F.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((c=i.getContentType())!==!1){const[l,...h]=c?c.split(";").map(u=>u.trim()).filter(Boolean):[];i.setContentType([l||"multipart/form-data",...h].join("; "))}}if(F.hasStandardBrowserEnv&&(o&&f.isFunction(o)&&(o=o(e)),o||o!==!1&&zr(e.url))){const l=r&&s&&Jr.read(s);l&&i.set(r,l)}return e},Xr=typeof XMLHttpRequest<"u",Gr=Xr&&function(t){return new Promise(function(n,o){const r=vn(t);let s=r.data;const i=B.from(r.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:l}=r,h,u,g,m,_;function w(){m&&m(),_&&_(),r.cancelToken&&r.cancelToken.unsubscribe(h),r.signal&&r.signal.removeEventListener("abort",h)}let p=new XMLHttpRequest;p.open(r.method.toUpperCase(),r.url,!0),p.timeout=r.timeout;function y(){if(!p)return;const v=B.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),T={data:!a||a==="text"||a==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:v,config:t,request:p};Cn(function(W){n(W),w()},function(W){o(W),w()},T),p=null}"onloadend"in p?p.onloadend=y:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(y)},p.onabort=function(){p&&(o(new C("Request aborted",C.ECONNABORTED,t,p)),p=null)},p.onerror=function(){o(new C("Network Error",C.ERR_NETWORK,t,p)),p=null},p.ontimeout=function(){let k=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const T=r.transitional||wn;r.timeoutErrorMessage&&(k=r.timeoutErrorMessage),o(new C(k,T.clarifyTimeoutError?C.ETIMEDOUT:C.ECONNABORTED,t,p)),p=null},s===void 0&&i.setContentType(null),"setRequestHeader"in p&&f.forEach(i.toJSON(),function(k,T){p.setRequestHeader(T,k)}),f.isUndefined(r.withCredentials)||(p.withCredentials=!!r.withCredentials),a&&a!=="json"&&(p.responseType=r.responseType),l&&([g,_]=Pe(l,!0),p.addEventListener("progress",g)),c&&p.upload&&([u,m]=Pe(c),p.upload.addEventListener("progress",u),p.upload.addEventListener("loadend",m)),(r.cancelToken||r.signal)&&(h=v=>{p&&(o(!v||v.type?new ie(null,t,p):v),p.abort(),p=null)},r.cancelToken&&r.cancelToken.subscribe(h),r.signal&&(r.signal.aborted?h():r.signal.addEventListener("abort",h)));const b=jr(r.url);if(b&&F.protocols.indexOf(b)===-1){o(new C("Unsupported protocol "+b+":",C.ERR_BAD_REQUEST,t));return}p.send(s||null)})},Qr=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let o=new AbortController,r;const s=function(l){if(!r){r=!0,a();const h=l instanceof Error?l:this.reason;o.abort(h instanceof C?h:new ie(h instanceof Error?h.message:h))}};let i=e&&setTimeout(()=>{i=null,s(new C(`timeout ${e} of ms exceeded`,C.ETIMEDOUT))},e);const a=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(l=>{l.unsubscribe?l.unsubscribe(s):l.removeEventListener("abort",s)}),t=null)};t.forEach(l=>l.addEventListener("abort",s));const{signal:c}=o;return c.unsubscribe=()=>f.asap(a),c}},Zr=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let o=0,r;for(;o<n;)r=o+e,yield t.slice(o,r),o=r},Yr=async function*(t,e){for await(const n of es(t))yield*Zr(n,e)},es=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:o}=await e.read();if(n)break;yield o}}finally{await e.cancel()}},Lt=(t,e,n,o)=>{const r=Yr(t,e);let s=0,i,a=c=>{i||(i=!0,o&&o(c))};return new ReadableStream({async pull(c){try{const{done:l,value:h}=await r.next();if(l){a(),c.close();return}let u=h.byteLength;if(n){let g=s+=u;n(g)}c.enqueue(new Uint8Array(h))}catch(l){throw a(l),l}},cancel(c){return a(c),r.return()}},{highWaterMark:2})},Le=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",kn=Le&&typeof ReadableStream=="function",ts=Le&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Tn=(t,...e)=>{try{return!!t(...e)}catch{return!1}},ns=kn&&Tn(()=>{let t=!1;const e=new Request(F.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Bt=64*1024,Ye=kn&&Tn(()=>f.isReadableStream(new Response("").body)),xe={stream:Ye&&(t=>t.body)};Le&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!xe[e]&&(xe[e]=f.isFunction(t[e])?n=>n[e]():(n,o)=>{throw new C(`Response type '${e}' is not supported`,C.ERR_NOT_SUPPORT,o)})})})(new Response);const os=async t=>{if(t==null)return 0;if(f.isBlob(t))return t.size;if(f.isSpecCompliantForm(t))return(await new Request(F.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(f.isArrayBufferView(t)||f.isArrayBuffer(t))return t.byteLength;if(f.isURLSearchParams(t)&&(t=t+""),f.isString(t))return(await ts(t)).byteLength},rs=async(t,e)=>{const n=f.toFiniteNumber(t.getContentLength());return n??os(e)},ss=Le&&(async t=>{let{url:e,method:n,data:o,signal:r,cancelToken:s,timeout:i,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:h,withCredentials:u="same-origin",fetchOptions:g}=vn(t);l=l?(l+"").toLowerCase():"text";let m=Qr([r,s&&s.toAbortSignal()],i),_;const w=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let p;try{if(c&&ns&&n!=="get"&&n!=="head"&&(p=await rs(h,o))!==0){let T=new Request(e,{method:"POST",body:o,duplex:"half"}),N;if(f.isFormData(o)&&(N=T.headers.get("content-type"))&&h.setContentType(N),T.body){const[W,J]=Nt(p,Pe(Ut(c)));o=Lt(T.body,Bt,W,J)}}f.isString(u)||(u=u?"include":"omit");const y="credentials"in Request.prototype;_=new Request(e,{...g,signal:m,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:o,duplex:"half",credentials:y?u:void 0});let b=await fetch(_,g);const v=Ye&&(l==="stream"||l==="response");if(Ye&&(a||v&&w)){const T={};["status","statusText","headers"].forEach(K=>{T[K]=b[K]});const N=f.toFiniteNumber(b.headers.get("content-length")),[W,J]=a&&Nt(N,Pe(Ut(a),!0))||[];b=new Response(Lt(b.body,Bt,W,()=>{J&&J(),w&&w()}),T)}l=l||"text";let k=await xe[f.findKey(xe,l)||"text"](b,t);return!v&&w&&w(),await new Promise((T,N)=>{Cn(T,N,{data:k,headers:B.from(b.headers),status:b.status,statusText:b.statusText,config:t,request:_})})}catch(y){throw w&&w(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new C("Network Error",C.ERR_NETWORK,t,_),{cause:y.cause||y}):C.from(y,y&&y.code,t,_)}}),et={http:yr,xhr:Gr,fetch:ss};f.forEach(et,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Ht=t=>`- ${t}`,is=t=>f.isFunction(t)||t===null||t===!1,Rn={getAdapter:t=>{t=f.isArray(t)?t:[t];const{length:e}=t;let n,o;const r={};for(let s=0;s<e;s++){n=t[s];let i;if(o=n,!is(n)&&(o=et[(i=String(n)).toLowerCase()],o===void 0))throw new C(`Unknown adapter '${i}'`);if(o)break;r[i||"#"+s]=o}if(!o){const s=Object.entries(r).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=e?s.length>1?`since :
`+s.map(Ht).join(`
`):" "+Ht(s[0]):"as no adapter specified";throw new C("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return o},adapters:et};function Je(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ie(null,t)}function Mt(t){return Je(t),t.headers=B.from(t.headers),t.data=ze.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Rn.getAdapter(t.adapter||ge.adapter)(t).then(function(o){return Je(t),o.data=ze.call(t,t.transformResponse,o),o.headers=B.from(o.headers),o},function(o){return Sn(o)||(Je(t),o&&o.response&&(o.response.data=ze.call(t,t.transformResponse,o.response),o.response.headers=B.from(o.response.headers))),Promise.reject(o)})}const Pn="1.10.0",Be={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Be[t]=function(o){return typeof o===t||"a"+(e<1?"n ":" ")+t}});const jt={};Be.transitional=function(e,n,o){function r(s,i){return"[Axios v"+Pn+"] Transitional option '"+s+"'"+i+(o?". "+o:"")}return(s,i,a)=>{if(e===!1)throw new C(r(i," has been removed"+(n?" in "+n:"")),C.ERR_DEPRECATED);return n&&!jt[i]&&(jt[i]=!0,console.warn(r(i," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,i,a):!0}};Be.spelling=function(e){return(n,o)=>(console.warn(`${o} is likely a misspelling of ${e}`),!0)};function as(t,e,n){if(typeof t!="object")throw new C("options must be an object",C.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let r=o.length;for(;r-- >0;){const s=o[r],i=e[s];if(i){const a=t[s],c=a===void 0||i(a,s,t);if(c!==!0)throw new C("option "+s+" must be "+c,C.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new C("Unknown option "+s,C.ERR_BAD_OPTION)}}const ve={assertOptions:as,validators:Be},z=ve.validators;let ee=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Ot,response:new Ot}}async request(e,n){try{return await this._request(e,n)}catch(o){if(o instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{o.stack?s&&!String(o.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+s):o.stack=s}catch{}}throw o}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ne(this.defaults,n);const{transitional:o,paramsSerializer:r,headers:s}=n;o!==void 0&&ve.assertOptions(o,{silentJSONParsing:z.transitional(z.boolean),forcedJSONParsing:z.transitional(z.boolean),clarifyTimeoutError:z.transitional(z.boolean)},!1),r!=null&&(f.isFunction(r)?n.paramsSerializer={serialize:r}:ve.assertOptions(r,{encode:z.function,serialize:z.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ve.assertOptions(n,{baseUrl:z.spelling("baseURL"),withXsrfToken:z.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=s&&f.merge(s.common,s[n.method]);s&&f.forEach(["delete","get","head","post","put","patch","common"],_=>{delete s[_]}),n.headers=B.concat(i,s);const a=[];let c=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(c=c&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});const l=[];this.interceptors.response.forEach(function(w){l.push(w.fulfilled,w.rejected)});let h,u=0,g;if(!c){const _=[Mt.bind(this),void 0];for(_.unshift.apply(_,a),_.push.apply(_,l),g=_.length,h=Promise.resolve(n);u<g;)h=h.then(_[u++],_[u++]);return h}g=a.length;let m=n;for(u=0;u<g;){const _=a[u++],w=a[u++];try{m=_(m)}catch(p){w.call(this,p);break}}try{h=Mt.call(this,m)}catch(_){return Promise.reject(_)}for(u=0,g=l.length;u<g;)h=h.then(l[u++],l[u++]);return h}getUri(e){e=ne(this.defaults,e);const n=En(e.baseURL,e.url,e.allowAbsoluteUrls);return bn(n,e.params,e.paramsSerializer)}};f.forEach(["delete","get","head","options"],function(e){ee.prototype[e]=function(n,o){return this.request(ne(o||{},{method:e,url:n,data:(o||{}).data}))}});f.forEach(["post","put","patch"],function(e){function n(o){return function(s,i,a){return this.request(ne(a||{},{method:e,headers:o?{"Content-Type":"multipart/form-data"}:{},url:s,data:i}))}}ee.prototype[e]=n(),ee.prototype[e+"Form"]=n(!0)});let cs=class xn{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const o=this;this.promise.then(r=>{if(!o._listeners)return;let s=o._listeners.length;for(;s-- >0;)o._listeners[s](r);o._listeners=null}),this.promise.then=r=>{let s;const i=new Promise(a=>{o.subscribe(a),s=a}).then(r);return i.cancel=function(){o.unsubscribe(s)},i},e(function(s,i,a){o.reason||(o.reason=new ie(s,i,a),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=o=>{e.abort(o)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new xn(function(r){e=r}),cancel:e}}};function ls(t){return function(n){return t.apply(null,n)}}function us(t){return f.isObject(t)&&t.isAxiosError===!0}const tt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(tt).forEach(([t,e])=>{tt[e]=t});function In(t){const e=new ee(t),n=sn(ee.prototype.request,e);return f.extend(n,ee.prototype,e,{allOwnKeys:!0}),f.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return In(ne(t,r))},n}const I=In(ge);I.Axios=ee;I.CanceledError=ie;I.CancelToken=cs;I.isCancel=Sn;I.VERSION=Pn;I.toFormData=Fe;I.AxiosError=C;I.Cancel=I.CanceledError;I.all=function(e){return Promise.all(e)};I.spread=ls;I.isAxiosError=us;I.mergeConfig=ne;I.AxiosHeaders=B;I.formToJSON=t=>yn(f.isHTMLForm(t)?new FormData(t):t);I.getAdapter=Rn.getAdapter;I.HttpStatusCode=tt;I.default=I;const{Axios:bs,AxiosError:ws,CanceledError:ys,isCancel:Ss,CancelToken:Cs,VERSION:Es,all:vs,Cancel:ks,isAxiosError:Ts,spread:Rs,toFormData:Ps,AxiosHeaders:xs,HttpStatusCode:Is,formToJSON:As,getAdapter:Ds,mergeConfig:Os}=I,An="http://localhost:5151/api/Faqs";function hs(){return I.post(`${An}/start`)}function fs(t){return I.post(`${An}/getByQuestion`,t)}const ds=()=>{const[t,e]=X(""),[n,o]=X([]),[r,s]=X([]),[i,a]=X([]),[c,l]=X(!1),[h,u]=X(""),[g,m]=X(null),_=Mn(null);je(()=>{_.current?.scrollIntoView({behavior:"smooth"})},[n,r]),je(()=>{hs().then(b=>{e(b.data.sessionId),o([{sender:"bot",message:b.data.greet}]),s(b.data.questions),a([])})},[]),je(()=>{if(!c||!t)return;const b=xo(t);return b.start().then(()=>{b.on("ReceiveMessage",(v,k,T)=>{o(N=>[...N,{sender:k,message:T}])})}),m(b),()=>{b.stop()}},[c,t]);const w=async b=>{o(T=>[...T,{sender:"customer",message:b}]);const k=await fs({Question:b,SessionId:t,Sender:"customer"});o(T=>[...T,{sender:"bot",message:k.data.answer}]),a(T=>[...T,{question:b,options:r}]),s(k.data.options)},p=()=>{if(i.length===0)return;const b=i[i.length-1];a(i.slice(0,-1)),s(b.options),o(v=>{const k=[...v];return k.pop(),k.pop(),k})};return E("div",{class:"fixed bottom-15 right-6 sm:bottom-30 sm:right-8 w-[300px] sm:w-[400px] min-h-[580px] sm:min-h-[618px] z-50 flex flex-col bg-white rounded-3xl shadow-2xl",children:[E(Io,{}),E(Oo,{messages:n,options:r,onSelect:w,inLiveChat:c,scrollRef:_}),E($o,{inLiveChat:c,input:h,setInput:u,onSend:()=>{if(!g||!h.trim())return;const b=h.trim();o(v=>[...v,{sender:"customer",message:b}]),g.invoke("SendMessage",t,"customer",b),u("")},canSend:!!h.trim(),onEscalate:()=>l(!0),backAvailable:!c&&i.length>0,onBack:p}),E("div",{ref:_})]})},_s=()=>{const[t,e]=X(!1);return E(_e,{children:[E(zn,{onOpen:()=>e(!0)}),t&&E(ds,{})]})};Ln(E(_s,{}),document.getElementById("app"));
